{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require('../shared/utils');\n\nvar _propTypes3 = require('../shared/propTypes');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar PageSVG = function (_Component) {\n  (0, _inherits3.default)(PageSVG, _Component);\n\n  function PageSVG() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, PageSVG);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = PageSVG.__proto__ || (0, _getPrototypeOf2.default)(PageSVG)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      svg: null\n    }, _this.onRenderSuccess = function () {\n      _this.renderer = null;\n      var _this$context = _this.context,\n          page = _this$context.page,\n          scale = _this$context.scale;\n      (0, _utils.callIfDefined)(_this.context.onRenderSuccess, (0, _utils.makePageCallback)(page, scale));\n    }, _this.onRenderError = function (error) {\n      if (error.name === 'RenderingCancelledException') {\n        return;\n      }\n\n      (0, _utils.callIfDefined)(_this.context.onRenderError, error);\n    }, _this.renderSVG = function () {\n      var page = _this.context.page;\n      _this.renderer = page.getOperatorList();\n      return _this.renderer.then(function (operatorList) {\n        var svgGfx = new PDFJS.SVGGraphics(page.commonObjs, page.objs);\n        _this.renderer = svgGfx.getSVG(operatorList, _this.viewport).then(function (svg) {\n          svg.style.maxWidth = '100%';\n          svg.style.height = 'auto';\n\n          _this.setState({\n            svg: svg\n          }, function () {\n            return _this.onRenderSuccess();\n          });\n        }).catch(_this.onRenderError);\n      }).catch(_this.onRenderError);\n    }, _this.drawPageOnContainer = function (element) {\n      var svg = _this.state.svg;\n\n      if (!element || !svg) {\n        return;\n      }\n\n      var renderedPage = element.firstElementChild;\n\n      if (renderedPage) {\n        var _this$viewport = _this.viewport,\n            width = _this$viewport.width,\n            height = _this$viewport.height;\n        renderedPage.setAttribute('width', width);\n        renderedPage.setAttribute('height', height);\n      } else {\n        element.appendChild(svg);\n      }\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(PageSVG, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.renderSVG();\n    }\n    /**\n     * Called when a page is rendered successfully.\n     */\n\n    /**\n     * Called when a page fails to render.\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement('div', {\n        className: 'react-pdf__Page__svg',\n        style: {\n          display: 'block',\n          backgroundColor: 'white' // Note: This cannot be shortened, as we need this function to be called with each render.\n\n        },\n        ref: function ref(_ref2) {\n          return _this2.drawPageOnContainer(_ref2);\n        }\n      });\n    }\n  }, {\n    key: 'viewport',\n    get: function get() {\n      var _context = this.context,\n          page = _context.page,\n          rotate = _context.rotate,\n          scale = _context.scale;\n      return page.getViewport(scale, rotate);\n    }\n  }]);\n  return PageSVG;\n}(_react.Component);\n\nexports.default = PageSVG;\nPageSVG.contextTypes = {\n  onRenderError: _propTypes2.default.func,\n  onRenderSuccess: _propTypes2.default.func,\n  page: _propTypes3.isPage.isRequired,\n  rotate: _propTypes3.isRotate,\n  scale: _propTypes2.default.number\n};","map":null,"metadata":{},"sourceType":"script"}