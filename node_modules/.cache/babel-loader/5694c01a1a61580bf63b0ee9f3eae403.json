{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _utils = require('../shared/utils');\n\nvar _propTypes3 = require('../shared/propTypes');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar PageCanvas = function (_Component) {\n  (0, _inherits3.default)(PageCanvas, _Component);\n\n  function PageCanvas() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, PageCanvas);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = PageCanvas.__proto__ || (0, _getPrototypeOf2.default)(PageCanvas)).call.apply(_ref, [this].concat(args))), _this), _this.onRenderSuccess = function () {\n      _this.renderer = null;\n      var _this$context = _this.context,\n          page = _this$context.page,\n          scale = _this$context.scale;\n      (0, _utils.callIfDefined)(_this.context.onRenderSuccess, (0, _utils.makePageCallback)(page, scale));\n    }, _this.onRenderError = function (error) {\n      if (error.name === 'RenderingCancelledException' || error.name === 'PromiseCancelledException') {\n        return;\n      }\n\n      (0, _utils.errorOnDev)(error.message, error);\n      (0, _utils.callIfDefined)(_this.context.onRenderError, error);\n    }, _this.drawPageOnCanvas = function (canvas) {\n      if (!canvas) {\n        return null;\n      }\n\n      var page = _this.context.page;\n      var _this2 = _this,\n          renderViewport = _this2.renderViewport,\n          viewport = _this2.viewport;\n      canvas.width = renderViewport.width;\n      canvas.height = renderViewport.height;\n      canvas.style.width = Math.floor(viewport.width) + 'px';\n      canvas.style.height = Math.floor(viewport.height) + 'px';\n      var renderContext = {\n        get canvasContext() {\n          return canvas.getContext('2d');\n        },\n\n        viewport: renderViewport\n      }; // If another render is in progress, let's cancel it\n\n      /* eslint-disable no-underscore-dangle */\n\n      if (_this.renderer && _this.renderer._internalRenderTask.running) {\n        _this.renderer._internalRenderTask.cancel();\n      }\n      /* eslint-enable no-underscore-dangle */\n\n\n      _this.renderer = page.render(renderContext);\n      return _this.renderer.then(_this.onRenderSuccess).catch(_this.onRenderError);\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(PageCanvas, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      /* eslint-disable no-underscore-dangle */\n      if (this.renderer && this.renderer._internalRenderTask.running) {\n        this.renderer._internalRenderTask.cancel();\n      }\n      /* eslint-enable no-underscore-dangle */\n\n    }\n    /**\n     * Called when a page is rendered successfully.\n     */\n\n    /**\n     * Called when a page fails to render.\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement('canvas', {\n        className: 'react-pdf__Page__canvas',\n        style: {\n          display: 'block',\n          userSelect: 'none'\n        },\n        ref: this.drawPageOnCanvas\n      });\n    }\n  }, {\n    key: 'renderViewport',\n    get: function get() {\n      var _context = this.context,\n          page = _context.page,\n          rotate = _context.rotate,\n          scale = _context.scale;\n      var pixelRatio = (0, _utils.getPixelRatio)();\n      return page.getViewport(scale * pixelRatio, rotate);\n    }\n  }, {\n    key: 'viewport',\n    get: function get() {\n      var _context2 = this.context,\n          page = _context2.page,\n          rotate = _context2.rotate,\n          scale = _context2.scale;\n      return page.getViewport(scale, rotate);\n    }\n  }]);\n  return PageCanvas;\n}(_react.Component);\n\nexports.default = PageCanvas;\nPageCanvas.contextTypes = {\n  onRenderError: _propTypes2.default.func,\n  onRenderSuccess: _propTypes2.default.func,\n  page: _propTypes3.isPage.isRequired,\n  rotate: _propTypes3.isRotate,\n  scale: _propTypes2.default.number\n};","map":null,"metadata":{},"sourceType":"script"}